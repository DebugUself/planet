<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>











<head>
<title>Planet DebugUself</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="generator" content="Planet/2.0 +http://www.planetplanet.org">
<link rel="stylesheet" href="planet.css" type="text/css">
<link rel="alternate" href="http://planet.du.zoomquiet.us/atom.xml" title="" type="application/atom+xml">
</head>

<body>
<h1>Planet DebugUself</h1>

<div class="daygroup">
<h2>March 10, 2018</h2>

<div class="channelgroup">







<h3><a href="http://sumin.ink" title="Su Min's blog">sumin</a></h3>


<div class="entrygroup" id="http://sumin.ink/2018/03/11/QuestionList.html">
<h4><a href="http://sumin.ink/2018/03/11/QuestionList.html">喵酱的提问自查清单</a></h4>
<div class="entry">
<div class="content">
参考资料：  开智学堂 APP 推荐 玉伯 issue 如何向开源社区提问题  开智学堂 认知写作推荐 超级黑客 Eric Steven Raymond 提问的智慧 节选版权声明：  本文非原创...</div>







<p class="date">
<a href="http://sumin.ink/2018/03/11/QuestionList.html">March 10, 2018 03:00 PM</a>
</p>
</div>
</div>



</div>
<div class="channelgroup">







<h3><a href="http://liguanghe.github.io/" title="Li Guanghe's blog">li guang he</a></h3>


<div class="entrygroup" id="http://liguanghe.github.io/2018/03/10/NZNationalPark/">
<h4><a href="http://liguanghe.github.io/2018/03/10/NZNationalPark/">一路向北(6)山路急弯</a></h4>
<div class="entry">
<div class="content">
<p>离开小城, 向山里进发. 从旺格努伊到陶波, 之间怎么走都是山路. 山路九曲十八弯, 这边路上转弯处均没装镜子, 也不适用转弯时鸣笛的规则. 但在转弯前会标明最佳的转弯速度, 有些急弯甚至标注到25公里/小时. 其他的有45/55/65/75/85. 我得结合导航上显示的弯</p></div>







<p class="date">
<a href="http://liguanghe.github.io/2018/03/10/NZNationalPark/">March 10, 2018 09:45 AM</a>
</p>
</div>
</div>




<div class="entrygroup" id="http://liguanghe.github.io/2018/03/10/NZWellington/">
<h4><a href="http://liguanghe.github.io/2018/03/10/NZWellington/">一路向北(3) 惠灵顿城</a></h4>
<div class="entry">
<div class="content">
<p>古巴街和国家博物馆的海边. 在惠灵顿机场接到刘欣后, 我们在这个城市待了两天. 离开时刘欣说, 其实整个假期一直待在惠灵顿, 在草地上睡觉就可以了. 我也想过这样待在这个美好的城市就好, 但同时也想让刘欣感受下正确的新西兰旅游方式, 自驾. 虽然车技一般, 但仍然制定了从惠</p></div>







<p class="date">
<a href="http://liguanghe.github.io/2018/03/10/NZWellington/">March 10, 2018 07:45 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>March 08, 2018</h2>

<div class="channelgroup">







<h3><a href="http://bambooom.github.io" title="Bambooom">bambooooooom</a></h3>


<div class="entrygroup" id="http://bambooom.github.io/2018/03/08/hexo-multi-lang/" lang="en-us">
<h4><a href="http://bambooom.github.io/2018/03/08/hexo-multi-lang/">hexo 多语言 blog</a></h4>
<div class="entry">
<div class="content">
<p>虽然自己是个懒惰的 github pages + jekyll user, 连域名都懒得花钱折腾的那种, 但是其他原因折腾了一下 <a href="https://hexo.io/">hexo</a>, 简单说下我认为比较靠谱的多语言 blog 方案.</p>

<h2 id="需求">需求</h2>
<p>虽说多语言, 当然先以中英文为例, 主要需求是这样的:</p>
<ul>
  <li>目录链接等模板 text 肯定是中英文分开, 这个很容易</li>
  <li>中英文 posts 分开, 某些文章可能两种语言都有, 某些文章可能只有其中一种</li>
  <li>tag/category/archive 都是分开的
    <ul>
      <li>因为一开始还尝试过修改 index render 方法, 在 front-matter 里添加一个 <code class="highlighter-rouge">lang: cn</code> 然后在 render 的时候 filter 掉</li>
      <li>这样 index page 是没有问题, 但是 tag/category/archive 等地方, 一样会混在一起</li>
    </ul>
  </li>
</ul>

<h2 id="搜索和尝试">搜索和尝试</h2>
<p>一开始搜索一通之后, 发现<a href="http://kvh.io/cn/hexo-nginx-multi-lingual.html">这篇</a>文章的作者和我的需求比较一致, 也感谢他的折腾, 我节省了尝试 hexo-generator-i18n 和 hexo-multilingual 插件的时间.</p>

<p>但对于<a href="https://hexo.io/docs/internationalization.html">官方国际化机制</a>也 failed, 我表示有一丝丝怀疑, hexo 自己的网站也是用自己的 dogfood 建出来的, 怎么人家有辣么多种语言呢?</p>

<p>仔细看了下它<a href="https://github.com/hexojs/site">自己网站的代码</a>和<a href="https://github.com/hexojs/hexojs.github.io">编译生成的结果</a>, 发现它是这样的:</p>
<ul>
  <li><code class="highlighter-rouge">source</code> 文件夹下面, 每种语言一个文件夹</li>
  <li>这个语言文件夹下, 首先有一个 <a href="https://github.com/hexojs/site/blob/master/source/zh-cn/index.jade"><code class="highlighter-rouge">index.jade</code></a> 页面, 按照它网站的设计, 主页只是一个 landing page, 所以没有什么特别的</li>
  <li>除此之外就是 <a href="https://github.com/hexojs/site/tree/master/source/zh-cn">api 和 docs 两个文件夹</a> 放着翻译好的 md 文档</li>
  <li>按照官网的设计, 只有这两个类别里面的文档需要多语言翻译, 另外三个 menu, 一个是 release news 用的, 一个是展示 plugins 用的, 一个是展示 theme 用的, 都并没有也不需要翻译</li>
  <li>另外, 官网的文档也并不使用 tag/category/archive, 因为有一个 algolia 搜索</li>
</ul>

<p>所以结论很明显: 用官方方案的确不能满足需求.</p>

<h2 id="所以用-npm-script-咯">所以用 npm script 咯</h2>
<p>前面<a href="http://kvh.io/cn/hexo-nginx-multi-lingual.html">那篇 post</a> 建两个文件夹再加 nginx 代理的方法, 我觉得是靠谱的, 但是一个问题是, 作者是分开两个仓库进行更新的, 那么会导致如果想要改样式和 layout, 那就需要再两个仓库里分别更新, 这个是绝对很蛋疼的. 
实际上作者的中英文网站的确在布局上不完全一样.</p>

<p>我一定希望只有一个仓库, 所以自己尝试了以下方法:</p>

<h3 id="_configyml"><code class="highlighter-rouge">_config.yml</code></h3>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">...</span>
<span class="na">url</span><span class="pi">:</span> <span class="s">http://yoursite.com/</span>
<span class="na">root</span><span class="pi">:</span> <span class="s">/en</span>
<span class="na">language</span><span class="pi">:</span> <span class="s">en</span>
<span class="na">public_dir</span><span class="pi">:</span> <span class="s">public/en</span>
<span class="nn">...</span>
</code></pre></div></div>

<p>其余的就不说了, 先设置默认的 language 是英文, 生成在 <code class="highlighter-rouge">public/en</code> 路径下</p>

<h3 id="_configcnyml"><code class="highlighter-rouge">_config.cn.yml</code></h3>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">zh-CN</span>
<span class="na">root</span><span class="pi">:</span> <span class="s">/cn</span>
<span class="na">public_dir</span><span class="pi">:</span> <span class="s">public/cn</span>
</code></pre></div></div>
<p>我另外单独创建了一个中文专用的 config 文件, 她可以只有上面几行.</p>

<h3 id="文件夹">文件夹</h3>
<p>在根目录下分别创建 <code class="highlighter-rouge">en</code> 和 <code class="highlighter-rouge">cn</code> 目录来分别存放中英文 post</p>

<h3 id="scripts-上">scripts 上</h3>
<p>其实想法非常简单, 每次 build 的时候, 如果是英文 blog, 则将 <code class="highlighter-rouge">en</code> 下的 posts 复制到 <code class="highlighter-rouge">source/_posts</code> 下,
也就是正常添加文章的地方, 然后再编译生成.</p>

<p>简单来说就是:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp <span class="nt">-r</span> en/<span class="k">*</span> <span class="nb">source</span>/_posts <span class="o">&amp;&amp;</span> hexo generate
</code></pre></div></div>

<p>这样, 在 public 下生成了 <code class="highlighter-rouge">en</code> 文件夹包含了所有英文 blog.</p>

<p>中文 blog 类似, 不一样的地方是将 <code class="highlighter-rouge">_config.cn.yml</code> 派上用处咯, 所幸 hexo 提供了一个 <a href="https://hexo.io/docs/configuration.html#Using-an-Alternate-Config">alternate config</a> 的功能.
也就是说你可以选择当前使用哪一个 config 文件, 或者使用多个 config 文件. 
这样就可以用 <code class="highlighter-rouge">hexo server --config _config.yml,_config.cn.yml</code> 这种命令来打造中文 blog 所需要的 config.
<code class="highlighter-rouge">_config.cn.yml</code> 放在后面才能覆盖掉英文 blog 的设置.</p>

<p>所以中文 blog 的 build 就是:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp <span class="nt">-r</span> en/<span class="k">*</span> <span class="nb">source</span>/_posts <span class="o">&amp;&amp;</span> hexo generate <span class="nt">--config</span> _config.yml,_config.cn.yml
</code></pre></div></div>

<p>这样, 在 public 下就会有 en 和 cn 两个样式一致但内容完全分开的 blog, 直接将 public 丢到 github pages 或者 netlify 之类可以 serve 静态网页
或者自己的服务器上跑一下 nginx, 就 over 了.</p>

<p>一个小问题是这样, 如果没有自己的服务器, 就简单丢到 netlify 类型的网站上 serve 的话, 可能必须直接到 <code class="highlighter-rouge">http://yoursite.com/en/</code> 或者 <code class="highlighter-rouge">http://yoursite.com/cn/</code> 才能正常访问.
这里一个小小的 hack 是这样, 加一个空白的 <code class="highlighter-rouge">index.html</code> 在 public 下, 根据浏览器的默认语言选择直接改一下 location redirect 到 <code class="highlighter-rouge">/en/</code>
或者 <code class="highlighter-rouge">/cn/</code> 上即可.</p>

<p>最后 npm script 可以设置成这样:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"build:en"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rm -rf source/_posts/* &amp;&amp; cp -r en/* source/_posts &amp;&amp; hexo generate &amp;&amp; rm -rf source/_posts/*"</span><span class="p">,</span><span class="w">
</span><span class="s2">"build:cn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rm -rf source/_posts/* &amp;&amp; cp -r cn/* source/_posts &amp;&amp; hexo generate --config _config.yml,_config.cn.yml &amp;&amp; rm -rf source/_posts/*"</span><span class="p">,</span><span class="w">
</span><span class="s2">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rm -rf public &amp;&amp; npm run build:en &amp;&amp; npm run build:cn &amp;&amp; cp index.html public/"</span><span class="w">
</span></code></pre></div></div>

<p>当然不用 npm script, 用 Makefile 也同样可以达到目的.
以及这个方法即使有其他更多语言都可以 hold 住了. 🤟🏻🖖🏻</p></div>







<p class="date">
<a href="http://bambooom.github.io/2018/03/08/hexo-multi-lang/">by bambooom (zhuzi.mn@gmail.com) at March 08, 2018 12:00 AM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>March 03, 2018</h2>

<div class="channelgroup">







<h3><a href="http://sumin.ink" title="Su Min's blog">sumin</a></h3>


<div class="entrygroup" id="http://sumin.ink/2018/03/04/ThreeBillboards.html">
<h4><a href="http://sumin.ink/2018/03/04/ThreeBillboards.html">《三块广告牌》感后</a></h4>
<div class="entry">
<div class="content">
数据先说一些数据：从猫眼票房数据来看，《三块广告牌》昨天的拍片比是0.8%，然而上座率是53.5%。今天目测，北京 APM 百老汇首场上座率100%，后面的场次票都卖出大半。一部讲述犯罪、创伤的...</div>







<p class="date">
<a href="http://sumin.ink/2018/03/04/ThreeBillboards.html">March 03, 2018 03:00 PM</a>
</p>
</div>
</div>


</div>

</div>
<div class="daygroup">
<h2>March 02, 2018</h2>

<div class="channelgroup">







<h3><a href="http://sumin.ink" title="Su Min's blog">sumin</a></h3>


<div class="entrygroup" id="http://sumin.ink/2018/03/03/WelcomeNewCreator.html">
<h4><a href="http://sumin.ink/2018/03/03/WelcomeNewCreator.html">CH-4 复盘笔记：欢迎你，创造者</a></h4>
<div class="entry">
<div class="content">
欢迎你，创造者18年1月最后一天，临危受命去出差，在10个小时的往返高铁上，复习“探索开智新世界”卡包，居然没有看完，这可是最基础的卡包啊。其实这个卡包，在17年加入部落时，我都看过了，大部分的...</div>







<p class="date">
<a href="http://sumin.ink/2018/03/03/WelcomeNewCreator.html">March 02, 2018 03:00 PM</a>
</p>
</div>
</div>


</div>

</div>


<div class="sidebar">
<img src="images/logo.png" width="136" height="136" alt="">

<h2>Subscriptions</h2>
<ul>
<li>
<a href="http://du.zoomquiet.io/atom.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://du.zoomquiet.io/" title="自怼圈">Debug Uself grp.</a>
</li>
<li>
<a href="https://bambooom.github.io/feed.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://bambooom.github.io" title="Bambooom">bambooooooom</a>
</li>
<li>
<a href="http://blog.junyu.io/atom.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://blog.junyu.io/" title="浚宇的博客">junyu</a>
</li>
<li>
<a href="https://liguanghe.github.io/rss2.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://liguanghe.github.io/" title="Li Guanghe's blog">li guang he</a>
</li>
<li>
<a href="https://mxclover.github.io/atom.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="https://mxclover.github.io/" title="mxclover">mxclover</a>
</li>
<li>
<a href="http://sumin.ink/feed.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://sumin.ink" title="Su Min's blog">sumin</a>
</li>
<li>
<a href="http://zoejane.netlify.com/index.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://localhost:1313/" title="Zoe Jane">zoejane</a>
</li>
<li>
<a href="http://blog.zoomquiet.io/feeds/all.atom.xml" title="subscribe"><img src="images/feed-icon-10x10.png" alt="(feed)"></a> <a href="http://blog.zoomquiet.io/" title="">zoom.quiet</a>
</li>
</ul>

<p>
<strong>Last updated:</strong><br>
April 04, 2018 08:42 AM<br>
<em>All times are UTC.</em><br>
<br>
Powered by:<br>
<a href="http://www.planetplanet.org/"><img src="images/planet.png" width="80" height="15" alt="Planet" border="0"></a>
</p>

<p>
<h2>Planetarium:</h2>
<ul>
<li><a href="http://www.planetapache.org/">Planet Apache</a></li>
<li><a href="http://planet.debian.net/">Planet Debian</a></li>
<li><a href="http://planet.freedesktop.org/">Planet freedesktop.org</a></li>
<li><a href="http://planet.gnome.org/">Planet GNOME</a></li>
<li><a href="http://planetsun.org/">Planet Sun</a></li>
<li><a href="http://fedora.linux.duke.edu/fedorapeople/">Fedora People</a></li>
<li><a href="http://www.planetplanet.org/">more...</a></li>
</ul>
</p>
</div>
</body>

</html>
